<!doctype html>
<html>
  <head>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <meta name="robots" content="noindex" />
    <style type="text/css">
      body,
      html {
        margin: 0;
        padding: 0;
      }
      #previewPlayer {
        position: absolute;
        width: 100%important!;
        height: 100%important!;
        border: none;
        overflow: hidden;
      }
      #frameSlider {
        width: 100%;
      }
      .jwplayer.jw-state-buffering .jw-display-icon-display .jw-icon {
        -webkit-animation: spin 2s linear infinite;
        animation: spin 2s linear infinite;
      }
      .jw-progress {
        background-color: #008422 !important;
      }
      .jw-skin-vapor .jw-rail {
        background: rgba(2, 36, 134, 0.76) !important;
      }
      .jw-icon-rewind {
        display: none !important;
      }
      #first,
      .jw-display-icon-container.jw-display-icon-rewind.jw-reset,
      .jw-display-icon-container.jw-display-icon-next.jw-reset {
        display: none;
      }
      .jw-icon-cc {
        display: none;
      }
    </style>
    <script src="https://ssl.p.jwpcdn.com/player/v/8.28.1/jwplayer.js"></script>
    <script
      type="text/javascript"
      src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"
    ></script>
    <script src="https://telegram.org/js/telegram-web-app.js?1"></script>
    <script>
      jwplayer.key = "ITWMv7t88JGzI0xPwW8I0+LveiXX9SWbfdmt0ArUSyc=";
    </script>
    <!-- <script src="//cdn.jsdelivr.net/npm/devtools-detector"></script> -->
    <!-- <script type="text/javascript">
      if (typeof devtoolsDetector === "undefined") {
        location.reload();
      } else {
        devtoolsDetector.launch();
        devtoolsDetector.addListener(function (isOpen) {
          if (isOpen) {
            location.reload();
          }
        });
      }
    </script> -->
  </head>
  <body>
    <div id="previewPlayer"></div>
    <script>
      Telegram.WebApp.expand();
      Telegram.WebApp.enableClosingConfirmation();
      Telegram.WebApp.MainButton.setParams({
        text: "CLOSE",
        is_visible: true,
      }).onClick(() => {
        Telegram.WebApp.showPopup(
          {
            message: "Are you sure?",
            buttons: [
              { id: "close", type: "destructive", text: "Close" },
              { type: "cancel" },
            ],
          },
          function (buttonId) {
            if (buttonId === "close") {
              Telegram.WebApp.close();
            }
          },
        );
      });

      var videoPlayer = jwplayer("previewPlayer");
      videoPlayer.setup({
        sources: [
          {
            file: "{{ url }}?url={{ hbsUrl }}",
            label: "1080p",
            type: "hls",
          },
        ],
        generateSEOMetadata: true,
        width: "100%",
        height: "100%",
        primary: "html5",
        displaytitle: false,
        autostart: true,
        playbackRateControls: true,
        mute: false,
        horizontalVolumeSlider: true,
      });

      videoPlayer.addButton(
        "/forward.svg",
        "Đến 20s",
        function () {
          videoPlayer.seek(videoPlayer.getPosition() + 20);
        },
        "Đến 20s",
      );
      videoPlayer.addButton(
        "/backward.svg",
        "Lùi 20s",
        function () {
          videoPlayer.seek(videoPlayer.getPosition() - 20);
        },
        "Lùi 20s",
      );
    </script>
  </body>
</html>
